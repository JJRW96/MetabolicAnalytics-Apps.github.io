<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="eng" xml:lang="eng"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Metabolic Model Apps – ShinyApps</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../Metabolic_Model_Apps/Power_Profile/Power_Profile.html" rel="next">
<link href="../about.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-2fef5ea3f8957b3e4ecc936fc74692ca.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-c37c20c2d52f32749143e665e697ee81.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-b5dc5b953d67f135e06aa4f51ec7213e.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../site_libs/bootstrap/bootstrap-c37c20c2d52f32749143e665e697ee81.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar docked fullcontent quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../Metabolic_Model_Apps/index_Metabolic_Model_Apps.html">Metabolic Model Apps</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../images/Logo_1.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../about.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../Metabolic_Model_Apps/index_Metabolic_Model_Apps.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Metabolic Model Apps</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../Metabolic_Model_Apps/Power_Profile/Power_Profile.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Power Profile</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Metabolic_Model_Apps/Power_Profile/Etalon_Calculator.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Etalon Converter</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Metabolic_Model_Apps/Metabolic_Profile.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Metabolic Profile</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Metabolic_Model_Apps/Mader_Modell.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Metabolic Simulation</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../Cycling_Apps/index_Cycling_Apps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Cycling Apps</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Cycling_Apps/Cycling_Forces.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Cycling Forces</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Cycling_Apps/CdA_App.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CdA Calculator</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Cadence_Test.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Cadence Tests</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Metabolic Model Apps</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="cell">
<style type="text/css">
p {
  text-align: justify
}
caption, .figure-caption {
  text-align: left;
}
figure.quarto-float-tbl figcaption {
  text-align: left !important;
}
figure figcaption {
  text-align: justify;
}
</style>
</div>
<section id="the-metabolic-modeling-suite---from-raw-data-to-physiological-simulation" class="level1">
<h1>The Metabolic Modeling Suite - From Raw Data to Physiological Simulation</h1>
<p>The Metabolic Modeling Suite is a collection of interconnected web applications designed to guide a user through the complete journey from performance analysis to physiological simulation. It bridges the gap between analyzing past performances and predicting future metabolic responses. The apps follow a logical progression, allowing a user to start with their own workout data, build an accurate model of their physiological capabilities, and then use that model to see how their body might respond to specific training sessions or race efforts.</p>
<p>The workflow is designed to be modular, so users can engage with the tools that best suit their immediate needs. The true power, however, lies in using the apps together. The core philosophy moves from a <strong>“top-down” analysis</strong> of real-world performance data to a <strong>“bottom-up” simulation</strong> of physiological dynamics.</p>
<p>The apps comprise three main functional components, each with a dedicated application:</p>
<ol type="1">
<li><strong>Performance Data Aggregation &amp; Profiling:</strong> The <strong>Composite Power Profile Analyzer</strong> and the <strong>Etalon W/kg Performance Converter</strong> are used to collect, standardize, and refine performance data into a validated power-duration profile.</li>
<li><strong>Integrated Physiological Modeling:</strong> The <strong>Integrated Metabolic &amp; Power Profile</strong> app serves as the central hub where the power-duration profile is combined with a physiological model to create a complete picture of an athlete’s metabolic engine.</li>
<li><strong>Dynamic Exercise Simulation:</strong> The <strong>Metabolic Simulation</strong> app uses the integrated profile from the previous step to run a second-by-second simulation of the body’s metabolic response to any given workout.</li>
</ol>
<p>This page provides an overview of this workflow, explaining how to leverage the suite to move from a collection of workout files to a detailed, predictive model of athletic performance. While the first three applications (Power Profile, Etalon Converter, Metabolic Profile) are built on robust models, the final <strong>Metabolic Simulation</strong> app should be considered more experimental. It attempts to model highly complex, dynamic interactions and is continuously being improved.</p>
<section id="the-core-workflow-a-step-by-step-guide" class="level2">
<h2 class="anchored" data-anchor-id="the-core-workflow-a-step-by-step-guide">The Core Workflow: A Step-by-Step Guide</h2>
<p>The intended workflow follows a logical progression, leveraging the specialized function of each application.</p>
<section id="step-1-building-the-power-profile-power-profile-analyzer" class="level3">
<h3 class="anchored" data-anchor-id="step-1-building-the-power-profile-power-profile-analyzer">Step 1: Building the Power Profile (Power Profile Analyzer)</h3>
<p>The first step is to establish an accurate representation of an athlete’s maximal power-duration capabilities. This is the primary function of the <strong>Composite Power Profile Analyzer</strong>.</p>
<ul>
<li><strong>Input:</strong> The process begins by uploading one or more raw activity files (e.g., <code>.tcx</code>, <code>.gpx</code>). The app is designed to handle a large number of files, aggregating data from weeks or even months of training and racing.</li>
<li><strong>Process:</strong>
<ol type="1">
<li><strong>Parsing &amp; Interpolation:</strong> The app reads each file to extract the fundamental time-stamped power data and interpolates it to a consistent 1-second resolution.</li>
<li><strong>MMP Curve Generation:</strong> For each individual activity, it calculates the Mean Maximal Power (MMP) curve—the highest average power achieved for every possible duration within that single ride.</li>
<li><strong>Composite Synthesis:</strong> The app’s key function is to then create a single, “best-ever” composite power curve. For every second of duration, it compares the MMP value from all individual files and retains only the single highest value. The result is a curve representing the athlete’s absolute best performance across all provided activities.</li>
</ol></li>
<li><strong>Modeling &amp; Refinement:</strong>
<ul>
<li>This composite curve is fitted with a mathematical model (e.g., OmPD, 2-P CP) to smooth the data and derive key parameters like Critical Power (CP).</li>
<li>An algorithm then identifies “Key Efforts”—breakthrough performances that are most representative of the athlete’s maximal capabilities, typically points that lie significantly above the fitted model. The user can further refine this list using a “Clean Up” function that removes redundant points, ensuring the final set is well-distributed and ideal for subsequent modeling.</li>
</ul></li>
<li><strong>Output:</strong> The final, curated list of key efforts is exported as a <code>.json</code> file. This file contains a lean, high-quality set of maximal power-duration data points, ready for the next stage of analysis.</li>
</ul>
</section>
<section id="step-2-generating-or-standardizing-data-etalon-wkg-converter" class="level3">
<h3 class="anchored" data-anchor-id="step-2-generating-or-standardizing-data-etalon-wkg-converter">Step 2: Generating or Standardizing Data (Etalon W/kg Converter)</h3>
<p>This step provides an alternative or supplementary method for generating performance data points, particularly when raw activity files are not available (e.g., analyzing a professional rider’s published performance). The <strong>Etalon W/kg Performance Converter</strong> is a specialized physics-based calculator.</p>
<ul>
<li><strong>Use Case 1 (Etalon → Real Power):</strong> If a performance is reported in “Etalon W/kg” (a standardized metric for a 60 kg rider), this tool can convert it back into a real-world absolute power value for a specific rider and climb. For example, if it’s known that a pro rider achieved 7.0 Etalon W/kg for 20 minutes, the user can input the rider’s body mass, bike weight, and the climb’s characteristics to calculate the actual absolute power (in Watts) they would have produced. This <code>(Power, Duration)</code> pair becomes a data point for the next step.</li>
<li><strong>Use Case 2 (Real Power → Etalon):</strong> Conversely, if an athlete knows their own absolute power for a climb, they can use this tool to convert it into the standardized Etalon W/kg metric for comparison against benchmarks.</li>
</ul>
</section>
<section id="step-3-creating-the-integrated-profile-integrated-metabolic-power-profile-app" class="level3">
<h3 class="anchored" data-anchor-id="step-3-creating-the-integrated-profile-integrated-metabolic-power-profile-app">Step 3: Creating the Integrated Profile (Integrated Metabolic &amp; Power Profile App)</h3>
<p>This is the core modeling stage where the athlete’s power capabilities are integrated with their unique physiology. The <strong>Integrated Metabolic &amp; Power Profile</strong> app is the central hub for this process.</p>
<ul>
<li><strong>Input:</strong> The user either manually enters power-duration data points or, ideally, imports the <code>.json</code> file of “Key Efforts” exported from the <strong>Power Profile Analyzer</strong> in Step 1. They also input key physiological parameters, such as their VO<sub>2,max</sub>, vLa<sub>max</sub>, body mass, and Cost of Exercise (CE).</li>
<li><strong>The Dual Model:</strong> This app uniquely runs two models in parallel:
<ol type="1">
<li>A <strong>Power-Duration Model</strong> is fitted to the imported power data points to calculate parameters like Critical Power (CP) and W’.</li>
<li>A <strong>Metabolic Model</strong> (based on the work of Mader) uses the physiological inputs (VO<sub>2,max</sub>, vLa<sub>max</sub>, CE) to calculate the body’s steady-state metabolic response to exercise, determining thresholds like the Maximal Lactate Steady State (MLSS) and Fat<sub>max</sub>.</li>
</ol></li>
<li><strong>Linking the Models (The Key Feature):</strong> The app provides a powerful “Fit Metabolic Parameter” tool. This feature creates a physiologically plausible link between the two models by assuming that an athlete’s MLSS is tightly correlated with their CP (e.g., MLSS ≈ 93-100% of CP). The user can select a metabolic parameter they are unsure of (e.g., vLa<sub>max</sub>) and the app will iteratively adjust its value until the MLSS calculated by the metabolic model matches the target percentage of the CP calculated from the power profile. This process harmonizes the two profiles, resulting in a single, cohesive physiological model that is anchored to real-world performance data.</li>
<li><strong>Output:</strong> The app produces a comprehensive set of visualizations, including the P-VO<sub>2</sub>-La dynamics plot, training zones, a power profile radar chart, and detailed metabolic values. This entire integrated profile, including the refined physiological parameters and the power data, can be saved and exported as a <code>.json</code> file for the final simulation stage. The app also features a “Comparison Mode” to analyze and contrast the metrics of multiple saved athlete profiles.</li>
</ul>
</section>
<section id="step-4-simulating-dynamic-exercise-metabolic-simulation-app" class="level3">
<h3 class="anchored" data-anchor-id="step-4-simulating-dynamic-exercise-metabolic-simulation-app">Step 4: Simulating Dynamic Exercise (Metabolic Simulation App)</h3>
<p>This final, “bottom-up” step takes the profile data from Step 3 and uses it to predict and visualize the second-by-second physiological response to a specific workout.</p>
<ul>
<li><strong>Input:</strong>
<ol type="1">
<li><strong>The Profile:</strong> The user loads the comprehensive <code>.json</code> profile saved from the <strong>Integrated Profile App</strong> or manually enters the same set of validated physiological parameters.</li>
<li><strong>The Stimulus:</strong> The user provides a power-time series to simulate. This can be a built-in step-test, a manually created interval session, or an uploaded <code>.tcx</code> file from a target race or training session.</li>
</ol></li>
<li><strong>The Simulation:</strong> The app runs a complex, second-by-second simulation that models:
<ul>
<li><strong>VO<sub>2</sub> Kinetics:</strong> The exponential rise and fall of oxygen uptake (τ<sub>on</sub>/τ<sub>off</sub>), including the VO<sub>2</sub> slow component.</li>
<li><strong>Lactate Dynamics:</strong> The rates of lactate production (vLa<sub>SS</sub>), oxidation (vLa<sub>ox</sub>), and the resulting net accumulation in muscle and blood compartments.</li>
<li><strong>High-Energy Phosphates:</strong> The depletion and resynthesis of phosphocreatine (PCr) based on the O<sub>2</sub> deficit and surplus.</li>
<li><strong>Muscle Homeostasis:</strong> The dynamic changes in intramuscular pH based on lactate, PCr, and CO<sub>2</sub> production.</li>
<li><strong>Substrate Utilization:</strong> The depletion of glycogen stores based on CHO oxidation rates and any carbohydrate intake.</li>
<li><strong>Fatigue Metrics:</strong> The change in W’ Balance and advanced fatigue metrics like Strain Score.</li>
</ul></li>
<li><strong>Output:</strong> The result is a detailed plot showing the dynamic interplay of these metabolic systems over the course of the entire workout. The summary statistics provide a quantitative breakdown of the metabolic cost, substrate usage, and strain of the session, offering powerful insights for pacing strategies, nutritional planning, and training prescription.</li>
</ul>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Disclaimer for the Metabolic Simulation App
</div>
</div>
<div class="callout-body-container callout-body">
<p>Please note that this simulation attempts to model highly complex and interactive physiological processes. It is a work in progress and does not claim to perfectly represent in-vivo metabolism. While a great deal of effort has gone into the model, the simulation of lactate dynamics in response to certain load profiles is not yet as robust as the other models in this workflow. The app is under continuous development with the goal of improving its accuracy and predictive power.</p>
</div>
</div>
</section>
</section>
<section id="how-the-apps-interconnect" class="level2">
<h2 class="anchored" data-anchor-id="how-the-apps-interconnect">How the Apps Interconnect</h2>
<p>The workflow is designed for a seamless flow of data from one stage to the next, primarily through the use of <code>.json</code> profile files. The intended data flow is as follows:</p>
<ol type="1">
<li><strong>Input Data</strong>
<ul>
<li>Start with raw <strong>Workout Files</strong> (<code>.gpx</code>, <code>.tcx</code>, etc.) OR a <strong>Known Performance</strong> (e.g., from race results).</li>
</ul></li>
<li><strong>Data Processing &amp; Profiling</strong>
<ul>
<li><strong>Workout Files</strong> are fed into the <code>Power Profile App</code>.
<ul>
<li><strong>Output:</strong> A <code>Key Efforts Profile (.json)</code> file.</li>
</ul></li>
<li>A <strong>Known Performance</strong> is processed by the <code>Etalon Converter</code>.
<ul>
<li><strong>Output:</strong> A single <code>Manual Data Point (Power, Duration)</code>.</li>
</ul></li>
</ul></li>
<li><strong>Integrated Modeling</strong>
<ul>
<li>The <code>Key Efforts Profile (.json)</code> or <code>Manual Data Point</code> is loaded into the <code>Integrated Profile App</code>.</li>
<li>The app combines this performance data with physiological parameters.</li>
<li><strong>Output:</strong> A <code>Full Metabolic Profile (.json)</code> containing validated power and physiological data.</li>
</ul></li>
<li><strong>Dynamic Simulation</strong>
<ul>
<li>The <code>Full Metabolic Profile (.json)</code> is loaded into the <code>Metabolic Simulation App</code>.</li>
<li>A <strong>Target Workout File</strong> (<code>.tcx</code>) is also loaded to provide the power stimulus.</li>
<li><strong>Final Output:</strong> A <code>Dynamic Simulation Plot</code> and <code>Metabolic Summary</code> detailing the predicted physiological response.</li>
</ul></li>
</ol>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/JJRW96\.github\.io\/MetabolicAnalytics-Apps\.github\.io\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../about.html" class="pagination-link" aria-label="About">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">About</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../Metabolic_Model_Apps/Power_Profile/Power_Profile.html" class="pagination-link" aria-label="Power Profile">
        <span class="nav-page-text">Power Profile</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Johannes Will, 2025 | <a href="mailto:JohannesWill96@gmail.com">JohannesWill96@gmail.com</a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p><a href="https://quarto.org/">Quarto</a></p>
</div>
  </div>
</footer>




</body></html>